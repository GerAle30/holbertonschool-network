#!/usr/bin/env bash
# Script that configures an Ubuntu server so that:
# - localhost resolves to 127.0.0.2
# - facebook.com resolves to 8.8.8.8

# Check if running as root
if [[ $EUID -ne 0 ]]; then
   echo "This script must be run as root (use sudo)" 
   exit 1
fi

# Backup the original /etc/hosts file
cp /etc/hosts /etc/hosts.backup

# Remove any existing entries for localhost and facebook.com
sed -i '/127.0.0.1.*localhost/d' /etc/hosts
sed -i '/::1.*localhost/d' /etc/hosts
sed -i '/.*facebook.com/d' /etc/hosts

# Add new entries
echo "127.0.0.2	localhost" >> /etc/hosts
echo "8.8.8.8		facebook.com" >> /etc/hosts

echo "Configuration updated successfully!"
echo "localhost now resolves to 127.0.0.2"
echo "facebook.com now resolves to 8.8.8.8"
echo "Original /etc/hosts backed up to /etc/hosts.backup"